<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI çƒ­ç‚¹é›·è¾¾</title>
  <style>
    :root {
      color-scheme: dark;
      --bg: #070b14;
      --panel: rgba(15, 25, 45, 0.78);
      --line: rgba(84, 172, 255, 0.35);
      --text: #ecf4ff;
      --subtext: #9eb4d1;
      --accent: #5ee6ff;
      --hot: #ff6d8f;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Inter", "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at 10% 20%, rgba(95, 230, 255, 0.14), transparent 32%),
        radial-gradient(circle at 85% 12%, rgba(143, 123, 255, 0.18), transparent 35%),
        var(--bg);
      line-height: 1.5;
    }
    .layout { width: min(1080px, 92vw); margin: 0 auto; padding: 40px 0 56px; }
    .hero {
      border: 1px solid var(--line); border-radius: 20px; padding: 26px;
      background: linear-gradient(140deg, rgba(28, 44, 74, 0.88), rgba(9, 18, 35, 0.86));
      box-shadow: inset 0 0 0 1px rgba(94, 230, 255, 0.08), 0 18px 60px rgba(0, 0, 0, 0.35);
      margin-bottom: 24px;
    }
    .tag {
      display: inline-flex; gap: 8px; align-items: center; padding: 6px 12px;
      border: 1px solid rgba(94, 230, 255, 0.5); border-radius: 999px; color: var(--accent);
      font-size: 12px; letter-spacing: 0.08em; text-transform: uppercase;
    }
    h1 { font-size: clamp(1.5rem, 3vw, 2.2rem); margin: 14px 0 10px; }
    .meta { color: var(--subtext); margin: 0; }
    .feature {
      margin-top: 20px; border: 1px solid rgba(255, 109, 143, 0.4); border-radius: 14px; padding: 16px;
      background: linear-gradient(145deg, rgba(82, 14, 44, 0.35), rgba(35, 14, 55, 0.28));
    }
    .feature small { color: #ffc7d4; font-weight: 600; letter-spacing: 0.06em; }
    .feature a { margin-top: 8px; display: inline-block; color: #fff; font-size: 1.05rem; text-decoration: none; font-weight: 600; }
    .feature a:hover { color: #ffd7e1; }
    .feature p { color: #ffd2dc; margin: 6px 0 0; font-size: .88rem; }
    .grid { display: grid; gap: 14px; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
    .card {
      background: var(--panel); border: 1px solid var(--line); border-radius: 14px; padding: 14px;
      display: flex; flex-direction: column; gap: 8px; min-height: 210px;
    }
    .card h3 { margin: 0; font-size: .98rem; }
    .card a { color: #d5ecff; text-decoration: none; }
    .card a:hover { color: var(--accent); }
    .card .summary { color: var(--subtext); font-size: .86rem; flex: 1; }
    .chip {
      align-self: flex-start; font-size: 12px; padding: 3px 8px; border-radius: 999px;
      background: rgba(94, 230, 255, 0.12); color: var(--accent); border: 1px solid rgba(94, 230, 255, 0.26);
    }
    .status { margin: 24px 0 0; color: var(--subtext); font-size: .92rem; }
  </style>
</head>
<body>
  <main class="layout">
    <section class="hero">
      <span class="tag">AI Trend Radar</span>
      <h1>ä»Šæ—¥ AI ç¼–ç¨‹çƒ­ç‚¹</h1>
      <p class="meta" id="last-updated">æ­£åœ¨åŠ è½½æœ€æ–°æ•°æ®â€¦</p>
      <div class="feature" id="feature-card">
        <small>HOT SPOT</small>
        <div id="feature-content">æ­£åœ¨å®šä½æœ€çƒ­è®¨è®ºâ€¦</div>
      </div>
    </section>

    <section>
      <div class="grid" id="hotspot-list"></div>
      <p class="status" id="status"></p>
    </section>
  </main>

  <script>
    const listEl = document.getElementById('hotspot-list');
    const statusEl = document.getElementById('status');
    const featureEl = document.getElementById('feature-content');
    const lastUpdatedEl = document.getElementById('last-updated');

    function formatTime(v) {
      if (!v) return 'æœªçŸ¥æ—¶é—´';
      const date = new Date(v);
      return Number.isNaN(date.getTime()) ? 'æœªçŸ¥æ—¶é—´' : date.toLocaleString('zh-CN', { hour12: false });
    }

    function toHotScore(item) {
      const score = Number(item.score ?? item.hot_score ?? 0);
      return Number.isFinite(score) ? score : 0;
    }

    function resolveUrl(item) {
      return item.source_url || item.url || '#';
    }

    function resolveTitle(item) {
      return item.title || 'æœªå‘½åçƒ­ç‚¹';
    }

    function resolveSummary(item) {
      return item.summary || 'æš‚æ— æ‘˜è¦';
    }

    function renderFeature(item) {
      if (!item) {
        featureEl.innerHTML = '<p>æš‚æ— çƒ­ç‚¹æ•°æ®ï¼Œè¯·å…ˆè¿è¡ŒæŠ“å–ä»»åŠ¡ã€‚</p>';
        return;
      }
      const title = resolveTitle(item);
      const url = resolveUrl(item);
      const summary = resolveSummary(item);
      featureEl.innerHTML = `
        <a href="${url}" target="_blank" rel="noopener noreferrer">${title}</a>
        <p>ğŸ”¥ çƒ­åº¦åˆ†ï¼š${toHotScore(item)} Â· æ¥æºï¼š${item.source || 'Reddit'} Â· ç‰ˆå—ï¼š${item.subreddit || '-'}</p>
        <p>${summary}</p>
      `;
    }

    function renderCards(items) {
      listEl.innerHTML = '';
      if (!items.length) {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = '<span class="chip">ç³»ç»Ÿæç¤º</span><h3>æš‚æ— çƒ­ç‚¹</h3><div class="summary">å½“å‰æ•°æ®ä¸ºç©ºï¼Œæ‰§è¡ŒæŠ“å–è„šæœ¬åå°†è‡ªåŠ¨å±•ç¤ºçƒ­ç‚¹å†…å®¹ã€‚</div>';
        listEl.appendChild(card);
        return;
      }

      for (const item of items) {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <span class="chip">${item.source || 'Reddit'}</span>
          <h3><a href="${resolveUrl(item)}" target="_blank" rel="noopener noreferrer">${resolveTitle(item)}</a></h3>
          <div class="summary">${resolveSummary(item)}</div>
          <div style="color:var(--subtext);font-size:0.85rem;">çƒ­åº¦ï¼š${toHotScore(item)} Â· è¯„è®ºï¼š${item.num_comments ?? 0}</div>
          <div style="color:var(--subtext);font-size:0.82rem;">${formatTime(item.published_at || item.created_utc)}</div>
        `;
        listEl.appendChild(card);
      }
    }

    async function loadHotspots() {
      try {
        const res = await fetch('data/hotspots.json', { cache: 'no-store' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        const items = Array.isArray(data.hotspots) ? data.hotspots : (Array.isArray(data.items) ? data.items : []);
        const sorted = [...items].sort((a, b) => toHotScore(b) - toHotScore(a));
        renderFeature(sorted[0]);
        renderCards(sorted.slice(0, 12));
        const updatedAt = data.generated_at || data.updated_at || (sorted[0] && (sorted[0].published_at || sorted[0].created_utc));
        lastUpdatedEl.textContent = `æœ€åæ›´æ–°ï¼š${formatTime(updatedAt)}`;
        statusEl.textContent = `å…± ${items.length} æ¡çƒ­ç‚¹ï¼Œå·²å±•ç¤ºçƒ­åº¦æœ€é«˜çš„ ${Math.min(12, items.length)} æ¡ã€‚`;
      } catch (err) {
        renderFeature(null);
        renderCards([]);
        statusEl.textContent = `è¯»å– data/hotspots.json å¤±è´¥ï¼š${err.message}`;
        lastUpdatedEl.textContent = 'è¯·å…ˆæ‰§è¡ŒæŠ“å–è„šæœ¬ç”Ÿæˆæ•°æ®ã€‚';
      }
    }

    loadHotspots();
  </script>
</body>
</html>
